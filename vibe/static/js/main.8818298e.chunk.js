(this["webpackJsonpvibe-client"]=this["webpackJsonpvibe-client"]||[]).push([[0],{33:function(e,t){e.exports=Buttplug},52:function(e,t,n){e.exports=n(92)},57:function(e,t,n){},89:function(e,t){},92:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(21),o=n.n(a),i=n(23),u=(n(57),n(2)),l=n(8),s=n(9),f=n.n(s),b=n(15),p=n(10),m=Object(p.c)({name:"share",initialState:{me:null,group:null,locks:{},clients:{}},reducers:{setMe:function(e,t){var n=t.payload.id;e.me=n},newSession:function(e,t){var n=t.payload;e.group=n},setFromServer:function(e,t){var n=t.payload;e.locks=n.locks,e.clients=n.clients}}}),v=m.actions,d=v.setMe,h=v.newSession,j=(Object(p.b)("share/lockAcquired"),Object(p.b)("share/lockReleased"),Object(p.b)("share/clientConnected")),O=Object(p.b)("share/clientDisconnected"),E=Object(p.b)("share/clientDeviceState"),g=Object(p.b)("share/clientVibration"),w=m.actions.setFromServer,y=function(e){return e.share.clients[e.share.me]},k=function(e){return Object.keys(e.share.clients).filter((function(t){return t!==e.share.me})).map((function(t){return e.share.clients[t]}))},S=m.reducer;function x(){var e=Object(l.c)(k);return c.a.createElement("div",null,e.map((function(e,t){return c.a.createElement(C,{key:t,other:e})})))}function C(e){var t=e.other,n=t.id,r=t.name,a=t.hasDevice,o=t.intensity,i=Object(l.b)();return c.a.createElement("h1",null,r,", device: ",a?"\u2713":"\ud83d\udeb7",", intensity: ",o,a&&c.a.createElement("input",{type:"range",min:"0",max:"0.9",step:"0.1",value:o,onChange:function(e){return i(g({id:n,intensity:Number(e.target.value)}))},onFocus:function(){return console.log("onFocus")},onBlur:function(){return console.log("onBlur")}}))}var D=n(11),B=n(33);function I(e){var t=e.render,n=e.onNewDevice,c=Object(r.useState)(!1),a=Object(D.a)(c,2),o=a[0],i=a[1];return function(e,t){var n=Object(r.useState)(null),c=Object(D.a)(n,2),a=c[0],o=c[1],i=Object(r.useState)([]),u=Object(D.a)(i,2),l=u[0],s=u[1],p=Object(r.useState)(!1),m=Object(D.a)(p,2),v=m[0],d=m[1];Object(r.useEffect)((function(){if(e&&!a){var n=new B.ButtplugClient("Cammy");n.addListener("deviceadded",(function(e){s(e),d(!0),t(e)})),o(n)}}),[e,t,a,l,v]),Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new B.ButtplugEmbeddedClientConnector,e.next=4,a.Connect(t);case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 10:return e.next=12,a.StartScanning();case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}a&&!v&&function(){e.apply(this,arguments)}()}),[a,v])}(o,n),o?null:t({initiateConnection:function(){return i(!0)}})}var V=n(94);function F(){var e=localStorage.getItem("clientId");return e||(e=V.a(),localStorage.setItem("clientId",e),e)}function M(){var e=Object(l.c)(y);return e?c.a.createElement(N,{me:e}):c.a.createElement(J,null)}function N(e){var t=e.me,n=t.id,a=t.name,o=t.hasDevice,i=t.intensity,u=Object(l.b)(),s=Object(r.useRef)(null),p=Object(r.useCallback)((function(e){s.current=e,u(E({id:n,hasDevice:!0}))}),[n,u]);return function(e,t){Object(r.useEffect)((function(){function n(){return(n=Object(b.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("startVibrate()"),n.next=3,e.SendVibrateCmd(t);case 3:console.log("startVibrate() over");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function r(){return(r=Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("stopVibrate()"),t.next=3,e.SendStopDeviceCmd();case 3:console.log("stopVibrate() over");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e&&(console.log("vibrateEffect: ".concat(t)),t>0?function(){n.apply(this,arguments)}():function(){r.apply(this,arguments)}())}),[e,t])}(s.current,i),Object(r.useEffect)((function(){return function(){return u(O(n))}}),[u,n]),c.a.createElement("div",null,c.a.createElement("h1",null,a),!o&&c.a.createElement(I,{render:function(e){var t=e.initiateConnection;return c.a.createElement("button",{onClick:t},"Make it Interesting")},onNewDevice:p}))}function J(){var e=Object(r.useState)(""),t=Object(D.a)(e,2),n=t[0],a=t[1],o=Object(l.b)();return c.a.createElement("div",null,c.a.createElement("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)},placeholder:"Name"}),c.a.createElement("button",{onClick:function(){return o(function(e){var t=e.id,n=e.name;return function(e){e(d({id:t})),e(j({id:t,name:n}))}}({id:F(),name:n}))}},"Join"))}function R(){var e=Object(u.f)().group,t=Object(l.b)();return Object(r.useEffect)((function(){t(h(e)),t(function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://vibe.api.willyouplease.me","/hydrate"));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t(w(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),c.a.createElement("div",null,c.a.createElement(M,null),c.a.createElement(x,null))}var W=function(){return c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/:group",component:R}))},q=n(50),A=n.n(q),L=n(51),$=n.n(L)()("http://vibe.api.willyouplease.me"),z=A()($,"share/client"),G=Object(p.a)({reducer:{share:S},middleware:function(e){return e().concat(z)}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,null,c.a.createElement(l.a,{store:G},c.a.createElement(W,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.8818298e.chunk.js.map