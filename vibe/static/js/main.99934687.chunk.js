(this["webpackJsonpvibe-client"]=this["webpackJsonpvibe-client"]||[]).push([[0],{35:function(e,n){e.exports=Buttplug},58:function(e,n,t){e.exports=t(99)},64:function(e,n,t){},96:function(e,n){},99:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(25),o=t.n(c),i=t(26),u=(t(63),t(64),t(2)),l=t(10),s=t(3),f=t(4);function m(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n\n  &:hover {\n    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n  }\n"]);return m=function(){return e},e}var p=f.b.div(m());function d(){var e=Object(s.a)(["\n  ","\n  width: 100%;\n  border: 0;\n  padding: 1rem;\n"]);return d=function(){return e},e}function b(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-bottom: 1px solid #000;\n  &:last-of-type {\n    border-bottom: 0;\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function v(){var e=Object(s.a)(["\n  background-color: pink;\n  color: white;\n"]);return v=function(){return e},e}var h=Object(f.a)(v()),j=f.b.section(b(),(function(e){return e.attention&&h}),(function(e){return e.padded&&"padding: 1rem"})),g=f.b.button(d(),h);function O(){var e=Object(s.a)(["\n    ","\n  "]);return O=function(){return e},e}function E(){var e=Object(s.a)(["\n    ","\n  "]);return E=function(){return e},e}function y(){var e=Object(s.a)(["\n    ","\n  "]);return y=function(){return e},e}function x(){var e=Object(s.a)(["\n    font-size: 0.5rem;\n  "]);return x=function(){return e},e}function w(){var e=Object(s.a)(["\n    font-size: 1rem;\n  "]);return w=function(){return e},e}function k(){var e=Object(s.a)(["\n    font-size: 1.5rem;\n  "]);return k=function(){return e},e}var C={large:Object(f.a)(k()),medium:Object(f.a)(w()),small:Object(f.a)(x())},S={Large:f.b.span(y(),C.large),Medium:f.b.span(E(),C.medium),Small:f.b.span(O(),C.small)};function D(){var e=Object(s.a)(["\n  padding: 2rem;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-gap: 1rem;\n"]);return D=function(){return e},e}var I=f.b.div(D()),B=t(11),M=t.n(B),T=t(19),V=t(12),F=Object(V.c)({name:"share",initialState:{me:null,group:null,locks:{},clients:{}},reducers:{setMe:function(e,n){var t=n.payload.id;e.me=t},newSession:function(e,n){var t=n.payload;e.group=t},setFromServer:function(e,n){var t=n.payload;e.locks=t.locks,e.clients=t.clients}}}),J=F.actions,N=J.setMe,z=J.newSession,L=(Object(V.b)("share/lockAcquired"),Object(V.b)("share/lockReleased"),Object(V.b)("share/clientConnected")),R=Object(V.b)("share/clientDeviceState"),W=Object(V.b)("share/clientVibration"),q=F.actions.setFromServer,A=function(e){return e.share.clients[e.share.me]},$=function(e){return Object.keys(e.share.clients).filter((function(n){return n!==e.share.me})).map((function(n){return e.share.clients[n]}))},G=F.reducer;function H(){var e=Object(l.c)($),n=Object(l.b)();return a.a.createElement(r.Fragment,null,e.map((function(e,t){return a.a.createElement(K,{key:t,other:e,setIntensity:function(t){return n(W({id:e.id,intensity:t}))}})})))}function K(e){var n=e.other,t=e.setIntensity,r=n.name,c=n.hasDevice,o=n.intensity;return a.a.createElement(p,null,a.a.createElement(j,{padded:!0},a.a.createElement(S.Large,null,r)),a.a.createElement(P,{hasDevice:c,intensity:o,setIntensity:t}))}function P(e){var n=e.hasDevice,t=e.intensity,r=e.setIntensity;return n?a.a.createElement(j,{padded:!0,attention:!0},a.a.createElement("input",{type:"range",min:"0",max:"0.9",step:"0.1",value:t,onChange:function(e){return r(Number(e.target.value))},onFocus:function(){return console.log("onFocus")},onBlur:function(){return console.log("onBlur")}})):a.a.createElement(j,{padded:!0,attention:!0},a.a.createElement(S.Medium,null,"No Device"))}var Q=t(15),U=t(35);var X=function(e){var n=e.initiateConnection;return a.a.createElement("button",{onClick:n},"Connect a Toy")},Y=function(e){var n=e.stopConnecting;return a.a.createElement("button",{onClick:n},"Stop Connecting")},Z=function(){return a.a.createElement("span",null,"Connected!")};function _(e){var n=e.clickToStart,t=void 0===n?X:n,a=e.clickToStop,c=void 0===a?Y:a,o=e.connected,i=void 0===o?Z:o,u=e.onNewDevice,l=Object(r.useState)(!1),s=Object(Q.a)(l,2),f=s[0],m=s[1],p=Object(r.useState)(!1),d=Object(Q.a)(p,2),b=d[0],v=d[1];return function(e,n){var t=Object(r.useRef)(null),a=Object(r.useState)([]),c=Object(Q.a)(a,2),o=c[0],i=c[1],u=Object(r.useState)(!1),l=Object(Q.a)(u,2),s=l[0],f=l[1];Object(r.useEffect)((function(){function r(){return(r=Object(T.a)(M.a.mark((function e(){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new U.ButtplugEmbeddedClientConnector,e.next=4,t.current.Connect(n);case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 10:return e.next=12,t.current.StartScanning();case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}t.current&&!e&&(t.current=null),!t.current&&e&&(t.current=new U.ButtplugClient("Cammy"),t.current.addListener("deviceadded",(function(e){i(e),f(!0),n(e)})),function(){r.apply(this,arguments)}())}),[e])}(f,(function(e){v(!0),u(e)})),b?i():f?f?c({stopConnecting:function(){return m(!1)}}):null:t({initiateConnection:function(){return m(!0)}})}var ee=t(101);function ne(){var e=localStorage.getItem("clientId");return e||(e=ee.a(),localStorage.setItem("clientId",e),e)}function te(){var e=Object(l.b)(),n=Object(l.c)(A);return n?a.a.createElement(re,{me:n}):a.a.createElement(ae,{onJoin:function(n){return e(function(e){var n=e.id,t=e.name;return function(e){e(N({id:n})),e(L({id:n,name:t}))}}({id:ne(),name:n}))}})}function re(e){var n=e.me,t=n.id,c=n.name,o=n.intensity,i=Object(l.b)(),u=Object(r.useRef)(null),s=Object(r.useCallback)((function(e){u.current=e,i(R({id:t,hasDevice:!0}))}),[t,i]);return function(e,n){Object(r.useEffect)((function(){function t(){return(t=Object(T.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("startVibrate()"),t.next=3,e.SendVibrateCmd(n);case 3:console.log("startVibrate() over");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(){return(r=Object(T.a)(M.a.mark((function n(){return M.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("stopVibrate()"),n.next=3,e.SendStopDeviceCmd();case 3:console.log("stopVibrate() over");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}e&&(console.log("vibrateEffect: ".concat(n)),n>0?function(){t.apply(this,arguments)}():function(){r.apply(this,arguments)}())}),[e,n])}(u.current,o),a.a.createElement(p,null,a.a.createElement(j,{padded:!0},a.a.createElement(S.Large,null,c)),a.a.createElement(_,{onNewDevice:s,clickToStart:function(e){var n=e.initiateConnection;return a.a.createElement(j,null,a.a.createElement(g,{onClick:n},"Connect My Toy"))},clickToStop:function(e){var n=e.stopConnecting;return a.a.createElement(j,null,a.a.createElement(g,{onClick:n},"Stop Connecting"))},connected:function(){return a.a.createElement(j,{attention:!0,padded:!0},a.a.createElement(S.Medium,null,"Connected!"))}}))}function ae(e){var n=e.onJoin,t=Object(r.useState)(""),c=Object(Q.a)(t,2),o=c[0],i=c[1];return a.a.createElement(p,null,a.a.createElement(j,{padded:!0},a.a.createElement("form",{onSubmit:function(e){n(o),e.preventDefault()}},a.a.createElement("input",{type:"text",value:o,onChange:function(e){return i(e.target.value)},placeholder:"Name"}),a.a.createElement("button",{type:"submit"},"Join"))))}function ce(){var e=Object(u.f)().group,n=Object(l.b)();return Object(r.useEffect)((function(){n(z(e)),n(function(){var e=Object(T.a)(M.a.mark((function e(n){var t,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://vibe.api.willyouplease.me","/hydrate"));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n(q(r));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),a.a.createElement(I,null,a.a.createElement(te,null),a.a.createElement(H,null))}var oe=function(){return a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/:group",component:ce}))},ie=t(56),ue=t.n(ie),le=t(57),se=t.n(le)()("https://vibe.api.willyouplease.me"),fe=ue()(se,"share/client"),me=Object(V.a)({reducer:{share:G},middleware:function(e){return e().concat(fe)}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,null,a.a.createElement(l.a,{store:me},a.a.createElement(oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.99934687.chunk.js.map