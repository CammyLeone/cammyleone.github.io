(this["webpackJsonprinse-client"]=this["webpackJsonprinse-client"]||[]).push([[0],{2082:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(74),o=n.n(c),i=n(130),u=(n(380),n(39)),l=n(58),s=n(365),m=n(80),f=n(366);function p(){var e=Object(s.a)({conversationId:"",currency:"$",perLike:"5",perComment:"5",perRetweet:"5",until:m.DateTime.local().plus({hours:1})}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(null),i=Object(l.a)(o,2),u=i[0],p=i[1],v=Object.values(n).every((function(e){return Boolean(e)})),d=function(e,t){var n=e.target.value;return c((function(e){e[t]=n}))};return a.a.createElement("main",null,a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"conversationId"},"Conversation ID: "),a.a.createElement("input",{id:"conversationId",type:"text",onChange:function(e){return d(e,"conversationId")},value:n.conversationId})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"currency"},"Currency: "),a.a.createElement("input",{type:"text",onChange:function(e){return d(e,"currency")},value:n.currency})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"perLike"},n.currency," per Like: "),a.a.createElement("input",{type:"text",onChange:function(e){return d(e,"perLike")},value:n.perLike})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"perComment"},n.currency," per Comment: "),a.a.createElement("input",{type:"text",onChange:function(e){return d(e,"perComment")},value:n.perComment})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"perRetweet"},n.currency," per Retweet: "),a.a.createElement("input",{type:"text",onChange:function(e){return d(e,"perRetweet")},value:n.perRetweet})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"until"},"Until: "),a.a.createElement(f.DateTimePicker,{id:"until",value:n.until.toJSDate(),onChange:function(e){return c((function(t){t.until=m.DateTime.fromJSDate(e)}))},formatStyle:"large",locale:"en-US",okLabel:"OK",cancelLabel:"Cancel"})),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return p("".concat("http://localhost:3000/rinse","/drain/").concat(n.conversationId,"/").concat(n.currency,"/").concat(n.perLike,"/").concat(n.perComment,"/").concat(n.perRetweet,"/").concat(n.until.toMillis()))},disabled:!v},"Drain Them")),a.a.createElement("div",null,u&&a.a.createElement("a",{href:u},u)))}var v=n(371),d=n(81),b=n(370),h=n.n(b),E=n(14),w=n.n(E),j=n(92),y=n(78);function O(e){var t=e.render,n=e.onNewDevice,a=Object(r.useState)(!1),c=Object(l.a)(a,2),o=c[0],i=c[1];return function(e,t){var n=Object(r.useState)(null),a=Object(l.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)([]),u=Object(l.a)(i,2),s=u[0],m=u[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),v=p[0],d=p[1];Object(r.useEffect)((function(){if(e&&!c){var n=new y.ButtplugClient("Cammy");n.addListener("deviceadded",(function(e){m(e),d(!0),t(e)})),o(n)}}),[e,t,c,s,v]),Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new y.ButtplugEmbeddedClientConnector,e.next=4,c.Connect(t);case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 10:return e.next=12,c.StartScanning();case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}c&&!v&&function(){e.apply(this,arguments)}()}),[c,v])}(o,n),o?null:t({initiateConnection:function(){return i(!0)}})}var k=n(132),C=Object(k.b)({name:"twitterStats",initialState:{isHydrated:!1,error:null,likes:null,comments:null,retweets:null},reducers:{apiDataReceived:function(e,t){var n=t.payload;e.isHydrated=!0,e.likes=n.likes,e.comments=n.comments,e.retweets=n.retweets},apiError:function(e,t){t.payload}}}),g=C.actions,S=g.apiDataReceived,x=g.apiError,D=function(e){return function(){var t=Object(j.a)(w.a.mark((function t(n){var r,a,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat("https://rinse.api.willyouplease.me","/twitter-stats-mock/").concat(e),t.prev=1,t.next=4,fetch(r);case 4:if((a=t.sent).ok){t.next=7;break}return t.abrupt("return",n(x));case 7:return t.next=9,a.json();case 9:c=t.sent,n(S(c)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(x(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return e.twitterStats.likes},R=function(e){return e.twitterStats.comments},L=function(e){return e.twitterStats.retweets},F=C.reducer,M=n(2086);function T(e){var t,n,c=e.likes,o=e.comments,i=e.retweets,u=e.cashMoneySpec,l=c*u.perLike+o*u.perComment+i*u.perRetweet;return t=e.device,n=function(e){var t=e%100;return M.a().clamp(!0).domain([0,100]).range([0,1])(t)}(l),Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("startVibrate()"),e.next=3,t.SendVibrateCmd(n);case 3:console.log("startVibrate() over");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("stopVibrate()"),e.next=3,t.SendStopDeviceCmd();case 3:console.log("stopVibrate() over");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(console.log("vibrateEffect: ".concat(n)),n>0?function(){e.apply(this,arguments)}():function(){r.apply(this,arguments)}())}),[t,n]),a.a.createElement("h1",null,u.currency,l)}function B(e){var t=e.until,n=Object(r.useState)(0),c=Object(l.a)(n,2),o=c[0],i=c[1];return function(e){var t=a.a.useRef(),n=a.a.useRef(),c=Object(r.useCallback)((function(r){if(void 0!==n.current){var a=r-n.current;e(a)}n.current=r,t.current=requestAnimationFrame(c)}),[e]);Object(r.useEffect)((function(){return console.log("running the effect"),t.current=requestAnimationFrame(c),function(){return cancelAnimationFrame(t.current)}}),[c])}(Object(r.useCallback)((function(e){i(function(e){var t=m.Interval.fromDateTimes(m.DateTime.local(),m.DateTime.fromMillis(e)).toDuration(["days","hours","minutes","seconds"]).toObject();t.seconds=Math.floor(t.seconds);var n=t.days,r=t.hours,a=t.minutes,c=t.seconds,o=function(e,t){return t>1?"".concat(e,"s"):e},i="";return n&&(i+="".concat(n," ").concat(o("day",n))),n&&(r||a||c)&&(i+=", "),r&&(i+="".concat(r," ").concat(o("hour",r))),r&&(a||c)&&(i+=", "),a&&(i+="".concat(a," ").concat(o("minute",a))),a&&c&&(i+=", "),c&&(i+="".concat(Math.floor(c)," ").concat(o("second",c))),i}(t))}),[t])),a.a.createElement("h1",null,"Time left: ",o)}function V(){var e=Object(u.f)(),t=e.conversationId,n=e.until,c=Object(v.a)(e,["conversationId","until"]),o=Object(d.c)(I),i=Object(d.c)(R),s=Object(d.c)(L),m=Object(d.b)(),f=Object(r.useState)(null),p=Object(l.a)(f,2),b=p[0],E=p[1];return Object(r.useEffect)((function(){m(D(t))}),[t,m]),h()((function(){m(D(t))}),3e3),a.a.createElement("div",null,a.a.createElement("h1",null,"Likes: ",o||"-"),a.a.createElement("h1",null,"Comments: ",i||"-"),a.a.createElement("h1",null,"Retweets: ",s||"-"),a.a.createElement(T,{device:b,likes:o,comments:i,retweets:s,cashMoneySpec:c}),n&&a.a.createElement(B,{until:Number(n)}),a.a.createElement(O,{render:function(e){var t=e.initiateConnection;return a.a.createElement("button",{onClick:t},"Make it Interesting")},onNewDevice:E}))}var J=function(){return a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/new",component:p}),a.a.createElement(u.a,{path:"/:conversationId/:currency/:perLike/:perComment/:perRetweet/:until",component:V}))},A=Object(k.a)({reducer:{twitterStats:F}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,null,a.a.createElement(d.a,{store:A},a.a.createElement(J,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},264:function(e,t){},375:function(e,t,n){e.exports=n(2082)},380:function(e,t,n){},889:function(e,t){},890:function(e,t){}},[[375,1,2]]]);
//# sourceMappingURL=main.273aa5c8.chunk.js.map